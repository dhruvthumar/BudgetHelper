<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>BUDGET</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');

*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
    --bg:#EAEFEF;
    --c:#fff;
    --t:#25343F;
    --t2:#4A5D6B;
    --t3:#7A8E9A;
    --br:#25343F;
    --accent:#FF9B51;
    --mid:#BFC9D1;
}
body{font-family:'Space Mono',monospace;background:var(--bg);color:var(--t);font-size:13px;overscroll-behavior:none}
button,select,input{font:inherit;-webkit-appearance:none;appearance:none}

/* NAV */
.n{background:var(--t);padding:0;position:sticky;top:0;z-index:50;border-bottom:4px solid var(--accent)}
.ni{max-width:700px;margin:0 auto;display:flex;align-items:stretch;justify-content:space-between}
.logo{font-weight:700;font-size:18px;color:var(--accent);padding:14px 16px;text-transform:uppercase;letter-spacing:.15em;border-right:2px solid rgba(255,255,255,.1)}
.tabs{display:flex;flex:1}
.tab{padding:14px 16px;background:transparent;border:none;border-right:2px solid rgba(255,255,255,.1);cursor:pointer;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:rgba(255,255,255,.4);transition:all .1s;flex:1;text-align:center}
.tab:hover{background:rgba(255,255,255,.05);color:rgba(255,255,255,.7)}
.tab.on{background:var(--accent);color:var(--t);border-color:var(--accent)}
.nr{display:flex;align-items:stretch}
.sel{padding:0 12px;border:none;border-left:2px solid rgba(255,255,255,.1);background:transparent;font-size:11px;font-weight:700;color:#fff;cursor:pointer;text-transform:uppercase;letter-spacing:.05em}
.sel option{color:var(--t);background:var(--c)}
.ib{width:48px;border:none;border-left:2px solid rgba(255,255,255,.1);background:transparent;cursor:pointer;font-size:16px;color:#fff;transition:all .1s}
.ib:hover{background:var(--accent);color:var(--t)}

/* MAIN */
.m{max-width:700px;margin:0 auto;padding:16px}

/* BALANCE */
.bal{background:var(--c);border:3px solid var(--t);padding:0;margin-bottom:16px;position:relative}
.bal-tag{position:absolute;top:-1px;left:-1px;background:var(--t);color:var(--accent);font-size:9px;font-weight:700;padding:4px 10px;letter-spacing:.15em;text-transform:uppercase}
.bal-v{font-size:48px;font-weight:700;padding:40px 20px 16px;border-bottom:3px solid var(--t);letter-spacing:-.02em}
.bal-r{display:flex}
.bal-i{flex:1;padding:14px 20px;text-align:left}
.bal-i:first-child{border-right:3px solid var(--t)}
.bal-i .l{font-size:9px;text-transform:uppercase;letter-spacing:.15em;font-weight:700;color:var(--t3);margin-bottom:4px;display:block}
.bal-i .v{font-size:20px;font-weight:700}
.v-in{color:var(--t)}
.v-ex{color:var(--accent)}
.bal-p{font-size:10px;color:var(--t3);margin-top:4px;font-weight:400}

/* COMPARISON */
.cmp{background:var(--c);border:3px solid var(--t);margin-bottom:16px;display:none;position:relative}
.cmp.show{display:block}
.cmp-tag{position:absolute;top:-1px;left:-1px;background:var(--t);color:var(--accent);font-size:9px;font-weight:700;padding:4px 10px;letter-spacing:.15em;text-transform:uppercase}
.cmp-inner{padding:36px 16px 16px}
.cmp-row{margin-bottom:16px}
.cmp-row:last-of-type{margin-bottom:0}
.cmp-rl{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:.15em;color:var(--t);margin-bottom:6px}
.bar-wrap{height:32px;background:var(--bg);border:2px solid var(--t);display:flex;overflow:hidden}
.bar-f{height:100%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;min-width:32px;transition:width .4s}
.bar-f.b1{background:var(--t);color:var(--accent)}
.bar-f.b2{background:var(--accent);color:var(--t)}
.cmp-vals{display:flex;justify-content:space-between;font-size:10px;margin-top:6px;font-weight:700}
.cmp-vals span:first-child{color:var(--t)}
.cmp-vals span:last-child{color:var(--accent)}
.cmp-totals{display:grid;grid-template-columns:1fr 1fr 1fr;border-top:3px solid var(--t);margin-top:0}
.cmp-totals>div{padding:14px 12px;text-align:left}
.cmp-totals>div:not(:last-child){border-right:3px solid var(--t)}
.cmp-totals .lbl{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--t3)}
.cmp-totals .v{font-size:18px;font-weight:700;margin-top:4px}

/* ADD BUTTON */
.add{margin-bottom:16px}
.add-b{width:100%;padding:14px;border:3px solid var(--t);background:var(--accent);cursor:pointer;font-weight:700;font-size:14px;color:var(--t);text-transform:uppercase;letter-spacing:.15em;transition:all .1s;text-align:center}
.add-b:hover{background:var(--t);color:var(--accent);border-color:var(--accent)}
.add-b:active{transform:translate(2px,2px)}

/* FORM */
.fm{background:var(--c);border:3px solid var(--t);margin-bottom:16px;display:none}
.fm.show{display:block}
.fm-header{background:var(--t);color:var(--accent);padding:10px 14px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.1em;display:flex;justify-content:space-between;align-items:center}
.fm-header span{opacity:.6}
.fm-u{display:flex;border-bottom:3px solid var(--t)}
.fm-ub{flex:1;padding:12px;border:none;background:var(--c);cursor:pointer;font-size:11px;font-weight:700;text-align:center;text-transform:uppercase;letter-spacing:.1em;color:var(--t3);transition:all .1s}
.fm-ub:first-child{border-right:3px solid var(--t)}
.fm-ub.u1.on{background:var(--t);color:var(--accent)}
.fm-ub.u2.on{background:var(--accent);color:var(--t)}
.fg{display:grid;grid-template-columns:1fr 1fr;padding:0}
.fi{padding:12px;border:none;border-bottom:2px solid var(--t);border-right:2px solid var(--t);width:100%;font-size:12px;background:var(--c);color:var(--t)}
.fi:focus{outline:none;background:var(--bg)}
.fi::placeholder{color:var(--mid)}
.fa{grid-column:span 2;display:flex;border-top:1px solid var(--t)}
.btn{padding:12px 20px;border:none;cursor:pointer;font-weight:700;font-size:12px;text-transform:uppercase;letter-spacing:.1em;transition:all .1s}
.bp{background:var(--accent);color:var(--t);flex:2}
.bp:hover{background:var(--t);color:var(--accent)}
.bs{background:var(--c);color:var(--t3);flex:1;border-right:3px solid var(--t)}
.bs:hover{background:var(--bg)}
.bd{background:var(--t);color:var(--accent);flex:1}
.bd:hover{background:var(--accent);color:var(--t)}

/* SECTION */
.sec{background:var(--c);border:3px solid var(--t);margin-bottom:16px;position:relative}
.st{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:.15em;background:var(--t);color:var(--accent);padding:6px 12px;display:inline-block;position:absolute;top:-1px;left:-1px}
.ch{height:180px;position:relative;padding:36px 12px 12px}

/* CHARTS */
.cg{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}

/* BUDGETS */
.bud-inner{padding:36px 12px 12px}
.bi{padding:10px;border:2px solid var(--t);margin-bottom:8px;background:var(--c)}
.bi:last-child{margin-bottom:0}
.bh{display:flex;justify-content:space-between;font-size:11px;margin-bottom:6px;font-weight:700}
.bh span:last-child{color:var(--t3);font-weight:400}
.bb{height:6px;background:var(--bg);border:1px solid var(--t);overflow:hidden}
.bf{height:100%;background:var(--t);transition:width .3s}
.bf.w{background:var(--accent)}
.bf.o{background:var(--accent)}

/* TRANSACTIONS */
.txs-inner{padding:36px 0 0}
.ti{display:flex;align-items:center;gap:10px;padding:10px 12px;border-bottom:2px solid var(--t);cursor:pointer;transition:background .1s}
.ti:last-child{border-bottom:none}
.ti:hover{background:var(--bg)}
.ti:active{background:var(--mid)}
.av{width:32px;height:32px;border:2px solid var(--t);display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:700;flex-shrink:0}
.av.a1{background:var(--t);color:var(--accent)}
.av.a2{background:var(--accent);color:var(--t)}
.tl{flex:1;min-width:0}
.td{font-size:12px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-transform:uppercase}
.tm{font-size:10px;color:var(--t3);display:flex;gap:6px;align-items:center;margin-top:2px}
.tc{background:var(--t);color:var(--accent);padding:1px 6px;font-size:9px;text-transform:uppercase;font-weight:700;letter-spacing:.05em}
.tr{display:flex;align-items:center;gap:6px;flex-shrink:0}
.ta{font-weight:700;font-size:14px;letter-spacing:-.02em}
.ta.t-in{color:var(--t)}
.ta.t-ex{color:var(--accent)}
.tx-actions{display:flex;gap:4px}
.tx-btn{background:var(--t);border:2px solid var(--t);color:var(--accent);cursor:pointer;font-size:11px;padding:4px 8px;font-weight:700;transition:all .1s;text-transform:uppercase}
.tx-btn:hover{background:var(--accent);color:var(--t);border-color:var(--accent)}
.tx-btn.del:hover{background:#C43E3E;border-color:#C43E3E;color:#fff}

/* EMPTY / LOADING */
.empty{text-align:center;color:var(--t3);padding:40px 20px;font-size:12px;text-transform:uppercase;letter-spacing:.1em}
.spin{width:20px;height:20px;border:3px solid var(--mid);border-top-color:var(--accent);border-radius:0;animation:sp .4s linear infinite;margin:30px auto}
@keyframes sp{to{transform:rotate(360deg)}}

/* MODAL */
.mo{display:none;position:fixed;inset:0;z-index:100}
.mo.show{display:flex;align-items:flex-start;justify-content:center;padding-top:5vh}
.mo-bg{position:fixed;inset:0;background:rgba(37,52,63,.7)}
.mo-b{position:relative;width:92%;max-width:420px;background:var(--c);border:3px solid var(--t);max-height:85vh;overflow:auto;z-index:1}
.mo-h{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:3px solid var(--t);background:var(--t)}
.mo-h h2{font-size:14px;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:.15em}
.mo-x{background:none;border:2px solid var(--accent);font-size:16px;cursor:pointer;color:var(--accent);padding:2px 8px;font-weight:700;transition:all .1s}
.mo-x:hover{background:var(--accent);color:var(--t)}
.mo-d{padding:16px}
.mo-f{padding:16px;border-top:3px solid var(--t)}
.mo-f .bp{width:100%;padding:14px}
.mo-f-row{display:flex;gap:8px}
.mo-f-row .btn{flex:1;padding:14px;text-align:center}
.sg{margin-bottom:18px}
.sl{font-size:10px;font-weight:700;margin-bottom:6px;display:block;text-transform:uppercase;letter-spacing:.1em}
.si{width:100%;padding:10px;border:2px solid var(--t);font-size:12px;color:var(--t);background:var(--c)}
.si:focus{outline:none;background:var(--bg);border-color:var(--accent)}
.sh{font-size:10px;color:var(--t3);margin-top:4px}
.sr{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.sr .si:first-child{border-left:4px solid var(--t)}
.sr .si:last-child{border-left:4px solid var(--accent)}
.ci{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border:2px solid var(--t);margin-bottom:6px;font-size:11px;font-weight:700;text-transform:uppercase}
.ci input{width:80px;padding:6px;border:2px solid var(--t);font-size:11px;font-weight:700;text-align:right;background:var(--c)}
.ci input:focus{outline:none;border-color:var(--accent)}

/* CONFIRM MODAL */
.confirm-text{font-size:13px;line-height:1.6;margin-bottom:16px;text-align:center;padding:10px}
.confirm-text strong{color:var(--accent)}

/* TOAST */
.toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);padding:12px 24px;background:var(--t);color:var(--accent);font-size:12px;font-weight:700;z-index:200;white-space:nowrap;border:3px solid var(--accent);text-transform:uppercase;letter-spacing:.1em}
.toast.ok{background:var(--t);color:var(--accent);border-color:var(--accent)}
.toast.err{background:var(--accent);color:var(--t);border-color:var(--t)}

@media(max-width:500px){
    .cg{grid-template-columns:1fr}
    .fg{grid-template-columns:1fr}
    .fg .fi{border-right:none}
    .fa{grid-column:span 1}
    .tabs{display:none}
    .ni{gap:0}
    .bal-v{font-size:36px;padding:36px 16px 12px}
    .tab-mobile{display:flex;border:3px solid var(--t);border-top:none;margin-bottom:16px}
    .tab-mobile .tab{border:none;border-right:3px solid var(--t);padding:10px;flex:1}
    .tab-mobile .tab:last-child{border-right:none}
    .tx-actions{flex-direction:column;gap:2px}
}
@media(min-width:501px){
    .tab-mobile{display:none!important}
}
</style>
</head>
<body>
<nav class="n"><div class="ni">
  <div class="logo">Budget</div>
  <div class="tabs">
    <button class="tab" data-v="user1" id="t1">Me</button>
    <button class="tab" data-v="user2" id="t2">Partner</button>
    <button class="tab on" data-v="household" id="t3">Both</button>
  </div>
  <div class="nr">
    <select id="mo" class="sel"></select>
    <button class="ib" id="setBtn">⚙</button>
  </div>
</div></nav>

<main class="m">
  <div class="tab-mobile">
    <button class="tab" data-v="user1" id="mt1">Me</button>
    <button class="tab" data-v="user2" id="mt2">Partner</button>
    <button class="tab on" data-v="household" id="mt3">Both</button>
  </div>

  <div class="bal" id="balCard">
    <div class="bal-tag" id="balTag">BALANCE</div>
    <div class="bal-v" id="bal">$0.00</div>
    <div class="bal-r">
      <div class="bal-i"><span class="l">Income</span><span class="v v-in" id="inc">+$0</span><div class="bal-p" id="incP"></div></div>
      <div class="bal-i"><span class="l">Expenses</span><span class="v v-ex" id="exp">-$0</span><div class="bal-p" id="expP"></div></div>
    </div>
  </div>

  <div class="cmp" id="cmpView">
    <div class="cmp-tag">HOUSEHOLD</div>
    <div class="cmp-inner">
      <div class="cmp-row">
        <div class="cmp-rl">Income</div>
        <div class="bar-wrap"><div class="bar-f b1" id="ib1">0%</div><div class="bar-f b2" id="ib2">0%</div></div>
        <div class="cmp-vals"><span id="iv1">$0</span><span id="iv2">$0</span></div>
      </div>
      <div class="cmp-row">
        <div class="cmp-rl">Expenses</div>
        <div class="bar-wrap"><div class="bar-f b1" id="eb1">0%</div><div class="bar-f b2" id="eb2">0%</div></div>
        <div class="cmp-vals"><span id="ev1">$0</span><span id="ev2">$0</span></div>
      </div>
    </div>
    <div class="cmp-totals">
      <div><div class="lbl">Income</div><div class="v" id="hi">$0</div></div>
      <div><div class="lbl">Expenses</div><div class="v" id="he">$0</div></div>
      <div><div class="lbl">Balance</div><div class="v" id="hb">$0</div></div>
    </div>
  </div>

  <div class="add"><button class="add-b" id="addBtn">+ ADD TRANSACTION</button></div>

  <div class="fm" id="fm">
    <div class="fm-header">
      <span id="fmTitle">NEW TRANSACTION</span>
      <span id="fmEditId"></span>
    </div>
    <div class="fm-u">
      <button type="button" class="fm-ub u1 on" id="fu1">Me</button>
      <button type="button" class="fm-ub u2" id="fu2">Partner</button>
    </div>
    <form id="txF" class="fg">
      <input type="date" id="fDate" class="fi" required>
      <input type="text" id="fDesc" class="fi" placeholder="DESCRIPTION" required>
      <select id="fCat" class="fi" required><option value="">CATEGORY</option></select>
      <input type="number" id="fAmt" class="fi" placeholder="0.00" step="0.01" inputmode="decimal" required>
      <select id="fType" class="fi"><option value="Expense">EXPENSE</option><option value="Income">INCOME</option></select>
      <div class="fa" id="faBtns">
        <button type="button" class="btn bs" id="fCancel">CANCEL</button>
        <button type="submit" class="btn bp" id="fSave">SAVE</button>
      </div>
    </form>
  </div>

  <div class="cg">
    <div class="sec"><div class="st">Categories</div><div class="ch"><canvas id="cC"></canvas></div></div>
    <div class="sec"><div class="st">Daily</div><div class="ch"><canvas id="dC"></canvas></div></div>
  </div>

  <div class="sec">
    <div class="st">Budgets</div>
    <div class="bud-inner" id="bud"><div class="spin"></div></div>
  </div>

  <div class="sec">
    <div class="st">Transactions</div>
    <div class="txs-inner" id="txs"><div class="spin"></div></div>
  </div>
</main>

<!-- Settings Modal -->
<div class="mo" id="modal">
  <div class="mo-bg" id="moBg"></div>
  <div class="mo-b">
    <div class="mo-h"><h2>Settings</h2><button class="mo-x" id="moX">×</button></div>
    <div class="mo-d">
      <div class="sg"><label class="sl">Script URL</label><input type="text" id="apiI" class="si" placeholder="https://script.google.com/..."><p class="sh">Your deployed Apps Script web app URL</p></div>
      <div class="sg"><label class="sl">Names</label><div class="sr"><input type="text" id="n1" class="si" placeholder="YOU"><input type="text" id="n2" class="si" placeholder="PARTNER"></div></div>
      <div class="sg"><label class="sl">Budgets</label><div id="catL"></div></div>
    </div>
    <div class="mo-f"><button class="btn bp" id="savS">SAVE CHANGES</button></div>
  </div>
</div>

<!-- Delete Confirm Modal -->
<div class="mo" id="delModal">
  <div class="mo-bg" id="delBg"></div>
  <div class="mo-b">
    <div class="mo-h"><h2>Delete?</h2><button class="mo-x" id="delX">×</button></div>
    <div class="mo-d">
      <div class="confirm-text" id="delText">Delete this transaction?</div>
    </div>
    <div class="mo-f">
      <div class="mo-f-row">
        <button class="btn bs" id="delNo">CANCEL</button>
        <button class="btn bd" id="delYes">DELETE</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script>window.BUDGET_API = window.BUDGET_API || '';</script>
<script src="config.js" onerror="console.log('no config.js')"></script>
<script src="app.js"></script>
</body>
</html>